<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>

<body>
	<h2>Hello JavaScript </h2>
	<script>
		//Using fetch method

   fetch('https://icanhazdadjoke.com/',{
    headers:{
     Accept: "application/json",
  },
})
.then(response => response.json())
.then(data => console.log(data.joke))
.catch(err => console.log(err))

//Using fetch with async and await .

async function getData(){
 try{
  const responseUrl = await fetch('https://icanhazdadjoke.com/',{
    headers:{
      Accept : "application/json",
    },
  })
    const response = await responseUrl.json();
    const jokes =  await response.joke;
    console.log(jokes)
  }
  catch(error){
    console.log(error)
  }
}

//Learning Promise

const wait = time => new Promise(
  res => setTimeout(() => res(), time)
);

wait(200)

.then(() => new Promise(res => res('foo')))
.then(b => console.log(b))
.catch(e => console.log(e))
.then(() => { throw new Error('bar'); })


	</script>

</body>

</html>